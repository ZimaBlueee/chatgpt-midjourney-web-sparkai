
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://gitee.com/hooray/fantastic-admin
 * Github https://github.com/hooray/fantastic-admin
 */
  
import{_ as B}from"./index-c786b651.js";import{a as g}from"./config-c56fc306.js";import{d as E,Q as G,r as b,t as R,o as u,c as d,e as l,f as t,a as V,k as p,R as x,S as L,E as P,h as a,x as y,q as M}from"./index-56458f60.js";const z={class:"flex justify-between"},J=V("b",null,"客户端动态菜单设置参数设置",-1),D=E({__name:"menu",setup(K){const k=[{label:"AI对话聊天",path:"Chat"},{label:"Midjourney绘画",path:"Midjourney"},{label:"绘画画廊",path:"Market"},{label:"Mind思维导图",path:"Mind"},{label:"应用广场",path:"AppStore"},{label:"会员中心",path:"Pay"},{label:"推广计划",path:"Share"}],v=[{label:"AI对话聊天",path:"/chat"},{label:"Midjourney绘画",path:"/midjourney"},{label:"绘画画廊",path:"/market"},{label:"Mind思维导图",path:"/mind"},{label:"应用广场",path:"/app-store"},{label:"不指定首页",path:""}],n=G({clientMenuList:[],clientHomePath:"",clientLogoPath:"",clientFavoIconPath:""}),C=b({clientHomePath:[{required:!1,trigger:"change",message:"请选择项目默认主页地址"}],clientMenuList:[{required:!1,trigger:"change",message:"请选择客户端开放的菜单"}],clientLogoPath:[{required:!1,trigger:"blur",message:"请填写您的网站LOGO图片链接"}],clientFavoIconPath:[{required:!1,trigger:"blur",message:"请填写您的网站favorit.ico网站logo地址"}]}),m=b();async function _(){const r=await g.queryConfig({keys:["clientHomePath","clientMenuList","clientLogoPath","clientFavoIconPath"]}),e=r.data;e.clientMenuList=e.clientMenuList?JSON.parse(e.clientMenuList):[],Object.assign(n,r.data)}function O(){var r;(r=m.value)==null||r.validate(async e=>{if(e){try{await g.setConfig({settings:w(n)}),P.success("变更配置信息成功")}catch{}_()}else P.error("请填写完整信息")})}function I(r,e){if(["clientMenuList"].includes(r)){if(!e)return[];if(e)return JSON.stringify(e)}else return e}function w(r){return Object.keys(r).map(e=>({configKey:e,configVal:I(e,r[e])}))}return R(()=>{_()}),(r,e)=>{const f=a("el-alert"),j=B,q=a("el-button"),F=a("el-checkbox"),S=a("el-checkbox-group"),s=a("el-form-item"),i=a("el-col"),c=a("el-row"),H=a("el-radio"),N=a("el-radio-group"),h=a("el-input"),U=a("el-form"),A=a("el-card");return u(),d("div",null,[l(j,null,{default:t(()=>[l(f,{closable:!1,"show-icon":"",title:"动态菜单配置说明",description:"如果不配置默认开启部分菜单、如果配置了开启菜单、则指定首页必须是开启的、否则会异常！",type:"success"})]),_:1}),l(A,{style:{margin:"20px"}},{header:t(()=>[V("div",z,[J,l(q,{class:"button",text:"",onClick:O},{default:t(()=>[p(" 保存设置 ")]),_:1})])]),default:t(()=>[l(U,{ref_key:"formRef",ref:m,rules:C.value,model:n,"label-width":"130px"},{default:t(()=>[l(c,null,{default:t(()=>[l(i,{xs:24,md:24,lg:24,xl:24},{default:t(()=>[l(s,{label:"侧边栏菜单",prop:"clientMenuList"},{default:t(()=>[l(S,{modelValue:n.clientMenuList,"onUpdate:modelValue":e[0]||(e[0]=o=>n.clientMenuList=o),size:"small"},{default:t(()=>[(u(),d(x,null,L(k,o=>l(F,{key:o.path,border:"",label:o.path},{default:t(()=>[p(y(o.label),1)]),_:2},1032,["label"])),64))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(c,null,{default:t(()=>[l(i,{xs:24,md:24,lg:24,xl:24},{default:t(()=>[l(s,{label:"设置指定首页",prop:"clientHomePath"},{default:t(()=>[l(N,{modelValue:n.clientHomePath,"onUpdate:modelValue":e[1]||(e[1]=o=>n.clientHomePath=o)},{default:t(()=>[(u(),d(x,null,L(v,o=>l(H,{key:o.path,size:"small",border:"",label:o.path},{default:t(()=>[p(y(o.label),1)]),_:2},1032,["label"])),64))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(c,null,{default:t(()=>[l(i,{xs:24,md:24,lg:24,xl:24},{default:t(()=>[l(s,{label:"用户端LOGO",prop:"clientLogoPath"},{default:t(()=>[l(h,{modelValue:n.clientLogoPath,"onUpdate:modelValue":e[2]||(e[2]=o=>n.clientLogoPath=o),placeholder:"请填写您要设置的网站LOGO图片链接",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(c,null,{default:t(()=>[l(i,{xs:24,md:24,lg:24,xl:24},{default:t(()=>[l(s,{label:"用户端ico",prop:"clientFavoIconPath"},{default:t(()=>[l(h,{modelValue:n.clientFavoIconPath,"onUpdate:modelValue":e[3]||(e[3]=o=>n.clientFavoIconPath=o),placeholder:"请填写您要设置的网站ico地址、格式为svg",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["rules","model"])]),_:1})])}}});typeof M=="function"&&M(D);export{D as default};
