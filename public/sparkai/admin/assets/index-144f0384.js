
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://gitee.com/hooray/fantastic-admin
 * Github https://github.com/hooray/fantastic-admin
 */
  
import{_ as q}from"./index-c786b651.js";import{a as p}from"./config-c56fc306.js";import{d as C,Q as k,r as f,t as w,o as g,c as j,e,f as t,a as I,k as v,J as T,E as y,h as r,q as b}from"./index-56458f60.js";const P={class:"flex justify-between"},J=I("b",null,"参数设置",-1),N=["href"],R=C({__name:"index",setup(U){const o=k({mjId:"",mjApplicationId:"",mjGuildId:"",mjChannelId:"",mjSessionId:"",mjVersion:"",mjAuthorization:"",mjRateLimit:"",mjMultiAccountSystemDomain:"",mjMultiAccountSystemSecret:"",mjTimeoutMs:""}),A=f({mjApplicationId:[{required:!0,trigger:"blur",message:"请填写应用ID"}],mjGuildId:[{required:!0,trigger:"blur",message:"请填写工会ID"}],mjChannelId:[{required:!0,trigger:"blur",message:"请填写通道ID"}],mjSessionId:[{required:!0,trigger:"blur",message:"请填写绘画ID"}],mjVersion:[{required:!0,trigger:"blur",message:"请填写版本ID"}],mjId:[{required:!0,trigger:"blur",message:"请填写基础ID"}],mjAuthorization:[{required:!0,trigger:"blur",message:"请填写授权令牌"}],mjMultiAccountSystemDomain:[{required:!0,trigger:"blur",message:"请填写绘画池系统域名"}],mjMultiAccountSystemSecret:[{required:!0,trigger:"blur",message:"请填写绘画池系统密钥"}],mjTimeoutMs:[{required:!0,trigger:"blur",message:"请填写绘画超时时间"}]}),c=f();async function d(){const n=await p.queryConfig({keys:["mjApplicationId","mjGuildId","mjChannelId","mjId","mjSessionId","mjVersion","mjAuthorization","mjRateLimit","mjMultiAccountSystemDomain","mjMultiAccountSystemSecret","mjTimeoutMs"]});Object.assign(o,n.data)}function M(){var n;(n=c.value)==null||n.validate(async l=>{if(l){try{await p.setConfig({settings:S(o)}),y.success("变更配置信息成功")}catch{}d()}else y.error("请填写必填信息")})}function S(n){return Object.keys(n).map(l=>({configKey:l,configVal:n[l]}))}return w(()=>{d()}),(n,l)=>{const _=r("el-alert"),h=q,V=r("el-button"),a=r("el-input"),s=r("el-form-item"),u=r("el-col"),i=r("el-row"),x=r("el-form"),D=r("el-card");return g(),j("div",null,[e(h,null,{default:t(()=>[e(_,{closable:!1,"show-icon":"",title:"参数说明",description:"MJ绘画API配置，目前只建议对接中转API，支持MJ所有的指令和相关操作，推荐API地址：https://api.oneabc.org",type:"success"})]),_:1}),e(D,{style:{margin:"20px"}},{header:t(()=>[I("div",P,[J,e(V,{class:"button",text:"",onClick:M},{default:t(()=>[v(" 保存设置 ")]),_:1})])]),default:t(()=>[e(x,{ref_key:"formRef",ref:c,rules:A.value,model:o,"label-width":"135px"},{default:t(()=>[e(i,null,{default:t(()=>[e(u,{xs:24,md:20,lg:15,xl:12},{default:t(()=>[e(s,{label:"绘画API地址",prop:"mjMultiAccountSystemDomain"},{default:t(()=>[e(a,{modelValue:o.mjMultiAccountSystemDomain,"onUpdate:modelValue":l[0]||(l[0]=m=>o.mjMultiAccountSystemDomain=m),placeholder:"域名示例: https://api.oneabc.org",clearable:""},null,8,["modelValue"]),o.mjMultiAccountSystemDomain?(g(),j("a",{key:0,href:o.mjMultiAccountSystemDomain,target:"_blank",style:{display:"inline"}},"前往API",8,N)):T("",!0)]),_:1})]),_:1})]),_:1}),e(i,null,{default:t(()=>[e(u,{xs:24,md:20,lg:15,xl:12},{default:t(()=>[e(s,{label:"MJ秘钥信息",prop:"mjMultiAccountSystemSecret"},{default:t(()=>[e(a,{modelValue:o.mjMultiAccountSystemSecret,"onUpdate:modelValue":l[1]||(l[1]=m=>o.mjMultiAccountSystemSecret=m),placeholder:"请填写M秘钥信息(中转系统为令牌key)",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(i,null,{default:t(()=>[e(u,{xs:24,md:20,lg:15,xl:12},{default:t(()=>[e(s,{label:"绘画超时时间",prop:"mjTimeoutMs"},{default:t(()=>[e(a,{modelValue:o.mjTimeoutMs,"onUpdate:modelValue":l[2]||(l[2]=m=>o.mjTimeoutMs=m),placeholder:"请设置绘画超时时间、单位为ms、一般设置为30万毫秒左右！",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["rules","model"])]),_:1})])}}});typeof b=="function"&&b(R);export{R as default};
